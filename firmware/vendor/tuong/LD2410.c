/*
 * LD2410.c
 *
 *  Created on: Jun 5, 2024
 *      Author: DELL
 */


#include "LD2410.h"

u8 cmd_start_config[] = {0xFD, 0xFC, 0xFB, 0xFA, 0x04, 0x00, 0xFF, 0x00, 0x01, 0x00, 0x04, 0x03, 0x02, 0x01};
u8 cmd_end_config[] = {0xFD, 0xFC, 0xFB, 0xFA, 0x02, 0x00, 0xFE, 0x00, 0x04, 0x03, 0x02, 0x01};


u8 cmd_send[] = {0xFD, 0xFC, 0xFB, 0xFA,
				0x14, 0x00,
				0x60, 0x00,
				0x00, 0x00, 0x02, 0x00, 0x00, 0x00,
				0x01, 0x00, 0x03, 0x00, 0x00, 0x00,
				0x02, 0x00, 0x02, 0x00, 0x00, 0x00,
				0x04, 0x03, 0x02, 0x01};

u8 sensitivity_conf[] = {0xFD, 0xFC, 0xFB, 0xFA,
				0x14, 0x00,
				0x64, 0x00,
				0x00, 0x00, 0xFF, 0xFF, 0x00, 0x00,
				0x01, 0x00, 0x28, 0x00, 0x00, 0x00,
				0x02, 0x00, 0x28, 0x00, 0x00, 0x00,
				0x04, 0x03, 0x02, 0x01};

u8 reset_config[] = {0xFD, 0xFC, 0xFB, 0xFA, 0x02, 0x00, 0xA2, 0x00, 0x04, 0x03, 0x02, 0x01};


void set_up_config(u8 type_config){
	if(type_config == RESET_CONFIG){
		uart_Send(cmd_start_config, sizeof(cmd_start_config));
		sleep_ms(5);
		uart_Send(reset_config, sizeof(reset_config));
		sleep_ms(5);
		uart_Send(cmd_end_config,sizeof(cmd_end_config));
		sleep_ms(5);
	}else if(type_config == SET_SENSITIVITY){
		uart_Send(cmd_start_config,sizeof(cmd_start_config));
		sleep_ms(5);
		uart_Send(sensitivity_conf, sizeof(sensitivity_conf));
		sleep_ms(5);
		uart_Send(cmd_end_config,sizeof(cmd_end_config));
		sleep_ms(5);
	}else if(type_config == SET_CONFIG){
		uart_Send(cmd_start_config,sizeof(cmd_start_config));
		sleep_ms(5);

		uart_Send(cmd_send, sizeof(cmd_send));
		sleep_ms(5);

		uart_Send(cmd_end_config,sizeof(cmd_end_config));
		sleep_ms(5);

	}
}


